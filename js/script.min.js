const navigationButton=document.querySelector(".navigation__toggle"),navigationList=document.querySelector(".navigation__list"),navigationMenu=document.querySelector(".navigation"),navigationItem=document.querySelector(".navigation__link"),bookingSearchButton=document.querySelector(".booking-search__button"),wholeForm=document.querySelector(".feedback-form__block"),requiredFields=document.querySelectorAll(".feedback-form__block input:required"),formButton=document.querySelector(".feedback-form__button"),modalFailure=document.querySelector(".modal-failure"),failureButton=document.querySelector(".modal-failure__button"),modalSuccess=document.querySelector(".modal-success"),successButton=document.querySelector(".modal-success__button"),contactsLine=document.querySelector(".fieldset-contacts__line");function closeOnEsc(e,o){document.addEventListener("keydown",(function s(t){27===(t.keyCode||t.which)&&(e.classList.remove(e.classList[1]),o&&(removeColors(),fieldFocus()),document.removeEventListener("keydown",s,!1))}),!1),event.stopPropagation()}function setFocus(e){e.setAttribute("tabindex","0"),e.focus()}function closeOnClick(e,o){document.addEventListener("click",(function s(t){!e.contains(t.target)&&isVisible(e)&&(e.classList.remove(e.classList[1]),o&&(removeColors(),fieldFocus()),document.removeEventListener("click",s,!1))}),!1),event.stopPropagation()}function isVisible(e){return!!e&&!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function removeColors(){for(let e=0;e<requiredFields.length;e++)requiredFields[e].classList[1]&&(requiredFields[e].classList.remove(requiredFields[e].classList[1]),requiredFields[e].parentNode.classList[2]&&requiredFields[e].parentNode.classList.remove(requiredFields[e].parentNode.classList[2]))}function fieldFocus(){for(let e=0;e<requiredFields.length;e++)if(!requiredFields[e].value){requiredFields[e].focus();break}}navigationButton.onclick=()=>{navigationMenu.classList.toggle("navigation--opened"),navigationList.classList.toggle("navigation__list--visible"),navigationList.classList.contains("navigation__list--visible")&&navigationItem.focus()},bookingSearchButton&&(bookingSearchButton.onclick=()=>{window.open("https://www.booking.com/apartments/city/us/sedona.ru.html")}),formButton&&(formButton.onclick=()=>{let e;for(let o=0;o<requiredFields.length;o++)requiredFields[o].value||(e=!0);if(e){for(let e=0;e<requiredFields.length;e++)requiredFields[e].value||(requiredFields[e].classList.add(requiredFields[e].className+"--error"),requiredFields[e].parentNode.classList[1]&&requiredFields[e].parentNode.classList.add(requiredFields[e].parentNode.classList[1]+"-error"));return modalFailure.classList.add(modalFailure.className+"--show"),setFocus(modalFailure),closeOnEsc(modalFailure,e),closeOnClick(modalFailure,e),!1}modalSuccess.classList.add(modalSuccess.className+"--show"),setFocus(modalSuccess),wholeForm.submit(),wholeForm.reset(),closeOnEsc(modalSuccess,e),closeOnClick(modalSuccess,e)},failureButton.onclick=()=>{modalFailure.classList.remove(modalFailure.classList[1]),fieldFocus(),removeColors()},successButton.onclick=()=>{modalSuccess.classList.remove(modalSuccess.classList[1])}),window.onload=()=>{navigationMenu.classList.remove("navigation--nojs")};